{% extends "base.html" %}

{% block title %}Users - {{ bot.bot_name }} - Advanced Bots Creator{% endblock %}

{% block content %}
<div class="bot-detail-header mb-4">
    <div>
        <h1><i class="fas fa-users"></i> Bot Users</h1>
        <p class="text-muted">{{ bot.bot_name }} (@{{ bot.bot_username }})</p>
    </div>
    <div>
        <a href="{{ url_for('bot_detail', bot_id=bot.id) }}" class="btn btn-outline-light">
            <i class="fas fa-arrow-left"></i> Back to Bot
        </a>
    </div>
</div>

<div class="card-glass">
    <h4><i class="fas fa-list"></i> User List ({{ users|length }} users)</h4>

    {% if users %}
    <div class="table-responsive mt-3">
        <table class="table table-dark table-hover">
            <thead>
                <tr>
                    <th>User ID</th>
                    <th>Coin Balance</th>
                    <th>Total Taps</th>
                    <th>Level</th>
                    <th>Interactions</th>
                    <th>First Seen</th>
                    <th>Last Seen</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td><strong>{{ user.telegram_user_id }}</strong></td>
                    <td>{{ user.coin_balance or 0 }}</td>
                    <td>{{ user.total_taps or 0 }}</td>
                    <td>{{ user.level or 1 }}</td>
                    <td>{{ user.total_interactions or 0 }}</td>
                    <td>{{ user.first_seen or 'N/A' }}</td>
                    <td>{{ user.last_seen or 'N/A' }}</td>
                    <td>
                        <a href="{{ url_for('user_detail', bot_id=bot.id, telegram_user_id=user.telegram_user_id) }}" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i> View Details
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info mt-3">
        <i class="fas fa-info-circle"></i> No users have interacted with this bot yet.
    </div>
    {% endif %}
</div>

<style>
.bot-detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
</style>

<script>
// The previous JavaScript for the modal has been removed as the 'View Details' button now navigates directly.
</script>
{% endblock %}